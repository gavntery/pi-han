<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
   <title>PixInsight Reference Documentation | AutoHistogram</title>
   <meta name="keywords" content="histogram, histogram manipulation, automatic midtones balance, gamma stretch, logarithmic stretch, midtones transfer function, MTF" />
   <meta name="author" content="Carlos Milovic F., PTeam." />
   <meta name="description" content="Automatic histogram transformation based on statistical image properties." />
   <meta name="robots" content="INDEX,FOLLOW" />
   <meta name="generator" content="PixInsight Documentation Compiler script version 1.6.3" />
   <script type="text/javascript" src="../../pidoc/scripts/pidoc-utility.js"></script>
   <link type="text/css" href="../../pidoc/css/pidoc-common.css" rel="stylesheet" />
   <link type="text/css" href="../../pidoc/css/pidoc-highlight.css" rel="stylesheet" />
   <link type="text/css" href="../../pidoc/css/pidoc-tool.css" rel="stylesheet" />
   <link rel="icon" href="../../pidoc/icons/pidoc-icon.png" type="image/png" />
   <link rel="shortcut icon" href="../../pidoc/icons/pidoc-icon.png" type="image/png" />
</head>
<body>
<script type="text/javascript">
   pidoc_generateDynamicContents();
</script>

<h1>AutoHistogram</h1>

<hr class="separator"/>

<div id="brief">
<p>Automatic histogram transformation based on statistical image properties. <a href="#__contents__">[more]</a></p></div>

<div id="categories">
<p><strong>Categories:</strong> IntensityTransformations</p>
</div>

<div id="keywords">
<p><strong>Keywords:</strong> histogram, histogram manipulation, automatic midtones balance, gamma stretch, logarithmic stretch, midtones transfer function, MTF</p>
</div>

<h3 class="pidoc_sectionTitle" id="__toc__">Contents</h3>
<p class="pidoc_sectionToggleButton" onclick="pidoc_toggleSection( 'toc', this );">[hide]</p>
<div id="toc">
<ul>
<li class="pidoc_tocItem"><a href="#__Description__">1&emsp;Description</a></li>
<li class="pidoc_tocItem"><a href="#__Parameters__">2&emsp;Parameters</a></li>

<ul>
<li class="pidoc_tocSubitem"><a href="#__parameter001__">2.1&emsp;Histogram Clipping</a></li>
<li class="pidoc_tocSubitem"><a href="#__parameter002__">2.2&emsp;Target Median Values</a></li>
<li class="pidoc_tocSubitem"><a href="#__parameter003__">2.3&emsp;Stretch Method</a></li>
</ul>
<li class="pidoc_tocItem"><a href="#__Usage__">3&emsp;Usage</a>
<ul>
<li class="pidoc_tocSubitem"><a href="#__Usage_:_Histogram_Clipping__">3.1&emsp;Histogram Clipping</a></li>
<li class="pidoc_tocSubitem"><a href="#__Usage_:_Target_Median_Values__">3.2&emsp;Target Median Values</a></li>
<li class="pidoc_tocSubitem"><a href="#__Usage_:_Stretch_Method__">3.3&emsp;Stretch Method</a></li>
</ul>
</li>
<li class="pidoc_tocItem"><a href="#__references__">References</a></li>
<li class="pidoc_tocItem"><a href="#__relatedTools__">Related Tools</a></li>
</ul>
</div>

<div id="__contents__">

<div class="pidoc_section" id="__Description__">
   <h3 class="pidoc_sectionTitle">1&emsp;Description</h3>
   <p class="pidoc_sectionToggleButton" onclick="pidoc_toggleSection( 'Description', this );">[hide]</p>
   <div id="Description">
<img style="float:left;margin-right:1.25em;margin-bottom:0.5em;" src="images/AutoHistogram.png" alt=""/>
<p>The sky background is often the dominant feature in deep-sky astronomical images. When this happens, statistical information can be used to model the contents of the image. In particular, the median of the image pixels tends to be a good estimate of the mean background value. Under this assumption, we can stretch the image nonlinearly with an automatically calculated midtones adjustment function to achieve a prescribed mean background value. The same procedure can help also to achieve the desired background color balance.</p>
<p>Before stretching the image, the dynamic range can also be reduced as an option by specifying black and white clipping points. This procedure clips a user-defined percentage of pixels, instead of using pixel values as fixed clipping points. See the AutoClip feature of the <a href="../../tools/HistogramTransformation/HistogramTransformation.html" title="../../tools/HistogramTransformation/HistogramTransformation.html">HistogramTransformation</a> tool for more information on this procedure.</p>
   </div>
</div>

<div class="pidoc_section" id="__Parameters__">
   <h3 class="pidoc_sectionTitle">2&emsp;Parameters</h3>
   <p class="pidoc_sectionToggleButton" onclick="pidoc_toggleSection( 'Parameters', this );">[hide]</p>
   <div id="Parameters">
      <div id="__parameter001__">
<div class="pidoc_parameter">
   <h4 class="pidoc_parameterTitle">2.1&emsp;Histogram Clipping</h4>
<p>Use these parameters to set the amount of clipping in the shadows and/or the highlights. Values are expressed as percentages of the total pixels.</p>
</div>

      </div>
      <div id="__parameter002__">
<div class="pidoc_parameter">
   <h4 class="pidoc_parameterTitle">2.2&emsp;Target Median Values</h4>
<p>This is the desired median value of the final image. If the background sky dominates the image, the median is a good estimate of its mean value. If the Joint RGB/K channels option is selected (default state), a neutral sky color will be achieved.</p>
</div>

      </div>
      <div id="__parameter003__">
<div class="pidoc_parameter">
   <h4 class="pidoc_parameterTitle">2.3&emsp;Stretch Method</h4>
<p>Select the algorithm used to perform the nonlinear midtones adjustment. You may choose among the most used algorithms to compress raw data:<sup><a href="#__reference_1__" class="pidoc_referenceTooltip" onmouseover="pidoc_showReferenceToolTip( this );" onmouseout="pidoc_hideReferenceToolTip();" data-tooltip="[Reference 1]<br/>
Schlick, C. 1994. <em>Quantization techniques for visualization of high dynamic range pictures.</em> In <em>Photorealistic Rendering Techniques,</em> Springer-Verlag, P. Shirley, G. Sakas and S. MÃ¼ller, Eds., 7&ndash;20.">[1]</a></sup></p>

<dl class="pidoc_list">
<dt>
<p>Gamma Transformation</p>
</dt>
<dd>
<p>This is a simple exponential transformation. The gamma exponent is automatically calculated by direct substitution. See the documentation for the <a href="../../tools/GammaStretch/GammaStretch.html" title="../../tools/GammaStretch/GammaStretch.html">GammaStretch</a> tool for more information on this function.</p>
</dd>
<dt>
<p>Logarithmic Transformation</p>
</dt>
<dd>
<p>Logarithm function with a unit pedestal and custom range parameter. The range necessary to achieve the specified median value is automatically calculated with an iterative routine. See the documentation for <a href="../../tools/LogStretch/LogStretch.html" title="../../tools/LogStretch/LogStretch.html">LogStretch</a> for more information.</p>
</dd>
<dt>
<p>Rational Interpolation (MTF)</p>
</dt>
<dd>
<p>A <em>midtones transfer function</em> (MTF) in PixInsight is a special rational interpolation function where a <em>midtones balance</em> parameter defines a nonlinear histogram stretch in the [0,1] range. In this mode, the necessary midtones balance to achieve the prescribed median value is computed automatically. More information on the MTF is avalaible in the documentation for the <a href="../../tools/HistogramTransformation/HistogramTransformation.html" title="../../tools/HistogramTransformation/HistogramTransformation.html">HistogramTransformation</a> process.</p>
</dd>
</dl>

</div>

      </div>
   </div>
</div>

<div class="pidoc_section" id="__Usage__">
   <h3 class="pidoc_sectionTitle">3&emsp;Usage</h3>
   <p class="pidoc_sectionToggleButton" onclick="pidoc_toggleSection( 'Usage', this );">[hide]</p>
   <div id="Usage">
<div class="pidoc_subsection" id="__Usage_:_Histogram_Clipping__">
   <h4 class="pidoc_subsectionTitle">3.1&emsp;Histogram Clipping</h4>
<img style="border:1px solid black;" src="images/HistogramClipping.png" alt=""/>
<p>This section is disabled by default. When it is enabled, the parameters in this section allow you to clip the specified percentages of the total pixels in the shadows and/or the highlights of the target image. Since the noise is higher in dark areas, a relatively small amount of pixels can usually be clipped in the shadows without destroying significant data. For this procedure to work correctly, make sure to crop any black borders caused by partial coverage during image registration, or similar border artifacts.</p>
<p>In general, for histogram manipulation of astronomical images we recommend using other tools that provide more accurate control, such as <a href="../../tools/HistogramTransformation/HistogramTransformation.html" title="../../tools/HistogramTransformation/HistogramTransformation.html">HistogramTransformation.</a> However, when used carefully this automatic clipping feature can yield very good results in combination with the different automatic stretch functions available (see below).</p>
</div>

<div class="pidoc_subsection" id="__Usage_:_Target_Median_Values__">
   <h4 class="pidoc_subsectionTitle">3.2&emsp;Target Median Values</h4>
<img style="border:1px solid black;" src="images/TargetMedianValues.png" alt=""/>
<p>Use these parameters to specify the desired median value(s) in the target image. These parameters can be used to alter both the global illumination and the color balance. When the process is applied to a color image, different target median values for individual RGB channels modify color balance. When the same values are specified for all channels, a neutral background will be achieved, assuming that the sky background is the dominant feature in the image.</p>
<p>For images not dominated by the background sky&mdash;for example, when large DSOs cover the field of view&mdash;a useful alternative is to extract the lightness (CIE L* component) as a grayscale image, process it with AutoHistogram, and then reinsert the modified lightness in the color image. See the ColorSpaces category for ways to perform this task.</p>
<p>Click the <strong>Set As Active Image</strong> button to copy target median values from the active image. If the active image is in the grayscale color space, the <em>joint RGB/K channels</em> option will be enabled automatically. If the active image is a color image, the <em>individual RGB/K channels</em> option will be enabled.</p>
<p>Enable the <strong>capture readouts</strong> option to read target median values from image readouts when this tool is visible. Readouts are generated when you click on an image with the mouse or other pointing device. You can click and drag to generate readouts as you move the cursor over the image.</p>
</div>

<div class="pidoc_subsection" id="__Usage_:_Stretch_Method__">
   <h4 class="pidoc_subsectionTitle">3.3&emsp;Stretch Method</h4>
<p>The selected algorithm isn't critical to the result, but it affects the global contrast of the transformed image and can make easier or harder further fine adjustments (with <a href="../../tools/CurvesTransformation/CurvesTransformation.html" title="../../tools/CurvesTransformation/CurvesTransformation.html">CurvesTransformation</a> or <a href="../../tools/HDRMultiscaleTransform/HDRMultiscaleTransform.html" title="../../tools/HDRMultiscaleTransform/HDRMultiscaleTransform.html">HDRMultiscaleTransform</a> tools, for example). In general, a gamma transformation generates less contrasted images, while the MTF (midtones transfer function) tends to yield more contrasted images. The logarithmic transformation provides intermediate contrast, but the achieved median values may be somewhat less accurate. We encourage you to test the different methods available and select the result that best suits your needs in each case.</p>

<div class="pidoc_figure">
<a id="__figure_1__"></a>
<p class="pidoc_figure_title">Figure 1</p>
<div class="pidoc_mouseover">
<div class="pidoc_image_right"><img src="images/NGC1808_Original.jpg" id="MycWPBx5lPOTSJFN" alt="" /></div>
<ul>
<li><span class="pidoc_indicator_default" id="MycWPBx5lPOTSJFN_1"></span><a href="javascript:void(0);" onmouseover="pidoc_setImgSrc('MycWPBx5lPOTSJFN', 'images/NGC1808_Original.jpg'); pidoc_hideGroup('MycWPBx5lPOTSJFN', 5); pidoc_setOpacity('MycWPBx5lPOTSJFN_1', 1.0);">Original linear image</a></li>
<li><span class="pidoc_indicator" id="MycWPBx5lPOTSJFN_2"></span><a href="javascript:void(0);" onmouseover="pidoc_setImgSrc('MycWPBx5lPOTSJFN', 'images/NGC1808_Gamma.jpg'); pidoc_hideGroup('MycWPBx5lPOTSJFN', 5); pidoc_setOpacity('MycWPBx5lPOTSJFN_2', 1.0);">Gamma stretch</a></li>
<li><span class="pidoc_indicator" id="MycWPBx5lPOTSJFN_3"></span><a href="javascript:void(0);" onmouseover="pidoc_setImgSrc('MycWPBx5lPOTSJFN', 'images/NGC1808_Log.jpg'); pidoc_hideGroup('MycWPBx5lPOTSJFN', 5); pidoc_setOpacity('MycWPBx5lPOTSJFN_3', 1.0);">Logarithmic function</a></li>
<li><span class="pidoc_indicator" id="MycWPBx5lPOTSJFN_4"></span><a href="javascript:void(0);" onmouseover="pidoc_setImgSrc('MycWPBx5lPOTSJFN', 'images/NGC1808_MTF.jpg'); pidoc_hideGroup('MycWPBx5lPOTSJFN', 5); pidoc_setOpacity('MycWPBx5lPOTSJFN_4', 1.0);">Midtones transfer function (MTF)</a></li>
<li><span class="pidoc_indicator" id="MycWPBx5lPOTSJFN_5"></span><a href="javascript:void(0);" onmouseover="pidoc_setImgSrc('MycWPBx5lPOTSJFN', 'images/NGC1808_MTF_HDRMT.jpg'); pidoc_hideGroup('MycWPBx5lPOTSJFN', 5); pidoc_setOpacity('MycWPBx5lPOTSJFN_5', 1.0);">MTF + HDRMultiscaleTransform</a></li>
</ul>
</div>

<div class="pidoc_vspacer" style="margin-top:0.5em;"></div>
<p><strong>Automatic stretch functions comparison</strong> with a linear luminance image of NGC 1808. In all cases the AutoHistogram tool has been applied with default parameters and automatic histogram clipping enabled. The logarithmic function yields a rather nice result in this case, especially to avoid star bloating. The midtones transfer function provides a more aggressive stretch, useful to prepare the image for HDR compression. Image courtesy of Jack Harvery (SSRO/PTeam).</p>
</div>
</div>

   </div>
</div>

<div class="pidoc_section" id="__references__">
   <h3 class="pidoc_sectionTitle">References</h3>
   <div id="references">
      <p id="__reference_1__"><strong>[1]</strong> Schlick, C. 1994. <em>Quantization techniques for visualization of high dynamic range pictures.</em> In <em>Photorealistic Rendering Techniques,</em> Springer-Verlag, P. Shirley, G. Sakas and S. MÃ¼ller, Eds., 7&ndash;20.</p>
   </div>
</div>

<div class="pidoc_section" id="__related_tools__">
   <h3 class="pidoc_sectionTitle">Related Tools</h3>
   <div id="related_tools">
<p><a href="../../tools/HistogramTransformation/HistogramTransformation.html" title="../../tools/HistogramTransformation/HistogramTransformation.html">HistogramTransformation</a>, <a href="../../tools/GammaStretch/GammaStretch.html" title="../../tools/GammaStretch/GammaStretch.html">GammaStretch</a>, <a href="../../tools/LogStretch/LogStretch.html" title="../../tools/LogStretch/LogStretch.html">LogStretch</a></p>
   </div>
</div>

<hr class="separator"/>

<div id="copyright">
   <p>Copyright &copy; 2012 Pleiades Astrophoto S.L. All Rights Reserved.</p>
</div>

<div id="footer">
   <p>Generated by the PixInsight Documentation Compiler script version 1.6.3 on 2018-12-04 19:23:27 UTC</p>
</div>
<br/>
<br/>

</div> <!-- contents -->

</body>
</html>
